(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[889],{79701:(e,n,t)=>{var u=t(72858).PROPER,l=t(84839),a=t(20886),i="​᠎";e.exports=function(e){return l((function(){return!!a[e]()||i[e]()!==i||u&&a[e].name!==e}))}},56027:(e,n,t)=>{"use strict";var u=t(70731),l=t(9009).map,a=t(73589),i=a("map");u({target:"Array",proto:!0,forced:!i},{map:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}})},93065:(e,n,t)=>{"use strict";var u=t(70731),l=t(56569).trim,a=t(79701);u({target:"String",proto:!0,forced:a("trim")},{trim:function(){return l(this)}})},96889:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>y});var u=t(28119),l=(t(56027),t(13114),t(74479),t(87796),t(93065),t(91831),t(26641),t(14527),t(20692)),a=t(33407),i=t(98468),r=t(28554),o=t(34526),c=t(50062),d={key:0,class:"center_view"},f={style:{"text-align":"left",width:"100%","margin-bottom":"20px"}},m={key:0},p={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center"}},s={style:{"font-weight":"700","font-size":"16px"}},v={style:{"padding-right":"30px"}},w={style:{display:"flex","justify-content":"center","align-items":"center","margin-bottom":"20px"}},k=(0,l._)("div",null,"父级菜单：",-1),b={style:{width:"100%","text-align":"center"}};const h={__name:"list",setup:function(e){var n,t=null===(n=(0,l.FN)())||void 0===n?void 0:n.appContext.config.globalProperties,h=function(e,n){return null===t||void 0===t?void 0:t.$toolUtil.isAuth(e,n)},g=(0,r.iH)([]),y=(0,r.iH)(0),_=(0,r.iH)(0),x=(0,r.iH)([]),V=function(){t.$http.get("menu/lists").then((function(e){g.value=JSON.parse(e.data.data[0].menujson),x.value=g.value[y.value].backMenu.map((function(e){return e.menu}))}))};V();var C=function(){x.value=g.value[y.value].backMenu.map((function(e){return e.menu}))},W=function(){t.$http.post("menu/update",{id:1,menujson:JSON.stringify(g.value)}).then((function(e){0==e.data.code&&o.z8.success("保存成功，重新登录后生效")}))},U=(0,r.iH)(!1),H=(0,r.iH)(null),M=(0,r.iH)(0),j=function(e,n){_.value=e,H.value=e,M.value=n,U.value=!0},z=function(){var e,n=g.value[y.value].backMenu[_.value].child.splice(M.value,1);(e=g.value[y.value].backMenu[H.value].child).push.apply(e,(0,u.Z)(n)),U.value=!1},D=function(e,n){c.T.prompt("请输入新菜单名","修改菜单名",{inputValidator:function(e){return e&&e.trim()?n.find((function(n){return n.menu==e.trim()}))?"该菜单名已存在":void 0:"请输入菜单名"}}).then((function(n){var t=n.value;e.menu=t.trim()}))["catch"]((function(){}))},N=function(e,n){var t;0!=n&&((t=e).splice.apply(t,[n-1,0].concat((0,u.Z)(e.splice(n,1)))),e=JSON.parse(JSON.stringify(e)))};return function(e,n){var t=(0,l.up)("el-button"),u=(0,l.up)("el-table-column"),r=(0,l.up)("el-checkbox"),o=(0,l.up)("el-checkbox-group"),c=(0,l.up)("el-table"),_=(0,l.up)("el-collapse-item"),V=(0,l.up)("el-collapse"),M=(0,l.up)("el-tab-pane"),O=(0,l.up)("el-tabs"),S=(0,l.up)("el-option"),$=(0,l.up)("el-select"),J=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[h("menu","菜单管理")?((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",f,[(0,l.Wm)(t,{type:"primary",style:{width:"100px"},onClick:W},{default:(0,l.w5)((function(){return[(0,l.Uk)("保存修改")]})),_:1})]),(0,l.Wm)(O,{type:"border-card",modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return y.value=e}),onTabChange:C},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.value,(function(e,d){return(0,l.wg)(),(0,l.j4)(M,{key:e.roleName,label:e.roleName,name:d},{default:(0,l.w5)((function(){return[d==y.value?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(V,{modelValue:x.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return x.value=e})},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.backMenu,(function(n,d){return(0,l.wg)(),(0,l.j4)(_,{name:n.menu},{title:(0,l.w5)((function(){return[(0,l._)("div",p,[(0,l._)("div",s,(0,a.zw)(n.menu),1),(0,l._)("div",v,[(0,l.Wm)(t,{size:"small",onClick:(0,i.iM)((function(n){return N(e.backMenu,d)}),["stop"])},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 上移 ")]})),_:2},1032,["onClick"]),(0,l.Wm)(t,{size:"small",type:"primary",onClick:(0,i.iM)((function(t){return D(n,e.backMenu)}),["stop"])},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 修改菜单名 ")]})),_:2},1032,["onClick"])])])]})),default:(0,l.w5)((function(){return[(0,l.Wm)(c,{data:n.child,"show-header":!1,style:{width:"100%",background:"#edeef0",border:"1px solid #ddd"}},{default:(0,l.w5)((function(){return[(0,l.Wm)(u,{prop:"menu",label:"菜单名",width:"180"}),(0,l.Wm)(u,{label:"权限"},{default:(0,l.w5)((function(e){return[(0,l.Wm)(o,{modelValue:e.row.buttons,"onUpdate:modelValue":function(n){return e.row.buttons=n}},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.row.allButtons,(function(e){return(0,l.wg)(),(0,l.j4)(r,{label:e,value:e},null,8,["label","value"])})),256))]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,l.Wm)(u,{label:"操作"},{default:(0,l.w5)((function(e){return[(0,l.Wm)(t,{size:"small",onClick:function(t){return N(n.child,e.$index)}},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 上移 ")]})),_:2},1032,["onClick"]),(0,l.Wm)(t,{size:"small",type:"primary",onClick:function(t){return D(e.row,n.child)}},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 修改菜单名 ")]})),_:2},1032,["onClick"]),(0,l.Wm)(t,{size:"small",type:"warning",onClick:function(n){return j(d,e.$index)}},{default:(0,l.w5)((function(){return[(0,l.Uk)(" 修改父级菜单 ")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1032,["data"])]})),_:2},1032,["name"])})),256))]})),_:2},1032,["modelValue"])])):(0,l.kq)("",!0)]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue"])])):(0,l.kq)("",!0),(0,l.Wm)(J,{title:"修改父级菜单",modelValue:U.value,"onUpdate:modelValue":n[3]||(n[3]=function(e){return U.value=e}),width:"30%"},{default:(0,l.w5)((function(){return[(0,l._)("div",w,[k,(0,l.Wm)($,{modelValue:H.value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return H.value=e}),placeholder:"请选择父级菜单",style:{width:"200px"}},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.value[y.value].backMenu,(function(e,n){return(0,l.wg)(),(0,l.j4)(S,{key:e.menu,label:e.menu,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),(0,l._)("div",b,[(0,l.Wm)(t,{type:"primary",onClick:z},{default:(0,l.w5)((function(){return[(0,l.Uk)("确 定")]})),_:1})])]})),_:1},8,["modelValue"])])}}},g=h,y=g}}]);
//# sourceMappingURL=889.dd879621.js.map